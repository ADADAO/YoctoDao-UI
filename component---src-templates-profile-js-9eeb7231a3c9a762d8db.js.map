{"version":3,"file":"component---src-templates-profile-js-9eeb7231a3c9a762d8db.js","mappings":"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","sources":["webpack://space-budz/./src/components/UnitDisplay/unitDisplay.jsx","webpack://space-budz/./src/templates/profile.js"],"sourcesContent":["import React from \"react\";\nimport { Box } from \"@chakra-ui/layout\";\n\nconst displayUnit = (quantity, decimals = 6) => {\n  return parseInt(quantity) / 10 ** decimals;\n};\n\nconst hideZero = (str) =>\n  str[str.length - 1] == 0 ? hideZero(str.slice(0, -1)) : str;\n\nconst UnitDisplay = ({\n  quantity,\n  decimals,\n  symbol,\n  hide,\n  showQuantity,\n  ...props\n}) => {\n  const num = displayUnit(quantity, decimals)\n    .toLocaleString(\"en-EN\", { minimumFractionDigits: decimals })\n    .split(\".\")[0];\n  const subNum = displayUnit(quantity, decimals)\n    .toLocaleString(\"en-EN\", { minimumFractionDigits: decimals })\n    .split(\".\")[1];\n  return (\n    <Box {...props}>\n      {quantity || quantity === 0 ? (\n        showQuantity ? (\n          <span style={{ marginRight: 12 }}>-</span>\n        ) : (\n          <>\n            {num}\n            {hide && hideZero(subNum).length <= 0 ? \"\" : \".\"}\n            <span style={{ fontSize: \"75%\" }}>\n              {hide ? hideZero(subNum) : subNum.slice(0, 2)}\n            </span>{\" \"}\n          </>\n        )\n      ) : (\n        \"... \"\n      )}\n      {symbol}\n    </Box>\n  );\n};\n\nexport default UnitDisplay;\n","import React from \"react\";\nimport InfiniteGrid from \"../components/InfiniteGrid\";\nimport Metadata from \"../components/Metadata\";\nimport { useStoreState } from \"easy-peasy\";\nimport { FloatingButton } from \"../components/Button\";\nimport { Box, SimpleGrid } from \"@chakra-ui/layout\";\nimport { BeatLoader } from \"react-spinners\";\nimport Icon from \"@mdi/react\";\nimport { mdiOpenInNew } from \"@mdi/js\";\nimport secrets from \"../../secrets\";\nimport { Spinner } from \"@chakra-ui/spinner\";\n\nconst POLICY = \"d5e6bf0500378d4f0da4e8dde6becec7621cd8cbf5cbb9b87013d4cc\";\n\nfunction fromHex(hex) {\n  var str = \"\";\n  for (var i = 0; i < hex.length && hex.substr(i, 2) !== \"00\"; i += 2)\n    str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));\n  return str;\n}\n\nconst Profile = ({ pageContext: { spacebudz } }) => {\n  const [address, setAddress] = React.useState(\"\");\n  const [tokens, setTokens] = React.useState({\n    owned: [],\n    bids: [],\n    offers: [],\n  });\n  const [isLoading, setIsLoading] = React.useState(true);\n  const connected = useStoreState((state) => state.connection.connected);\n  const didMount = React.useRef(false);\n  const isFirstConnect = React.useRef(true);\n  const fetchAddressBudz = async (address) => {\n    setIsLoading(true);\n    setTokens(null);\n    const tokens = { owned: [], bids: [], offers: [] };\n    const amount = await fetch(\n      `https://cardano-mainnet.blockfrost.io/api/v0/addresses/${address}`,\n      { headers: { project_id: secrets.PROJECT_ID } }\n    )\n      .then((res) => res.json())\n      .then((res) => res.amount);\n    const offers = await fetch(`https://spacebudz.io/api/offers/${address}`, {\n      headers: { project_id: secrets.PROJECT_ID },\n    }).then((res) => res.json());\n\n    tokens.offers = offers.offers.map((offer) => ({\n      ...spacebudz[offer.budId],\n      price: offer.offer.amount,\n    }));\n\n    const bids = await fetch(`https://spacebudz.io/api/bids`, {\n      headers: { project_id: secrets.PROJECT_ID },\n    }).then((res) => res.json());\n\n    tokens.bids = bids.bids\n      .filter((bid) => bid.bid.owner == address)\n      .map((bid) => ({\n        ...spacebudz[bid.budId],\n        price: bid.bid.amount,\n      }));\n\n    try {\n      const ownedAmount = amount\n        .filter((am) => am.unit.startsWith(POLICY))\n        .map((am) => parseInt(fromHex(am.unit.slice(56)).split(\"SpaceBud\")[1]));\n      const ownedBids = bids.bids.filter((bid) => bid.bid.owner == address);\n      const owned = ownedAmount.map((id) => {\n        const sellPrice = bids.bids.find((bid) => bid.budId == id);\n        return {\n          ...spacebudz[id],\n          price: sellPrice ? sellPrice.bid.amount : undefined,\n        };\n      });\n      tokens.owned = owned;\n    } catch (e) {}\n    setTokens(tokens);\n    setIsLoading(false);\n  };\n  const update = async () => {\n    const address =\n      typeof window !== \"undefined\" &&\n      new URL(window.location.href).searchParams.get(\"address\");\n    setAddress(address);\n    fetchAddressBudz(address);\n  };\n  React.useEffect(() => {\n    if (didMount.current) {\n      if (connected && !isFirstConnect.current)\n        window.history.pushState({}, null, `/profile?address=${connected}`);\n      else isFirstConnect.current = false;\n    } else didMount.current = true;\n    window.scrollTo(0, 0);\n    update();\n  }, [connected]);\n  React.useEffect(() => {\n    let url = window.location.href;\n    const urlChange = setInterval(() => {\n      const newUrl = window.location.href;\n      if (url !== newUrl) {\n        url = newUrl;\n        update();\n      }\n    });\n    return () => clearInterval(urlChange);\n  }, []);\n\n  return (\n    <>\n      <Metadata\n        titleTwitter=\"SpaceBudz: Collectible Astronauts\"\n        title=\"SpaceBudz | Profile\"\n        description=\"Collect your unique SpaceBud as NFT on the Cardano blockchain.\"\n      />\n      <div\n        style={{\n          minHeight: \"100vh\",\n          margin: \"0 20px\",\n          marginTop: 20,\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"column\",\n          marginTop: 150,\n        }}\n      >\n        <div\n          style={{\n            maxWidth: 1400,\n            width: \"100%\",\n          }}\n        >\n          <div style={{ fontWeight: 600, fontSize: 26 }}>\n            Account Details {address === connected && \"(Connected)\"}\n          </div>\n          {/* <Spacer y={0.5} /> */}\n          <Box h={4} />\n          <div style={{ display: \"flex\" }}>\n            <div\n              style={{\n                wordBreak: \"break-all\",\n                verticalAlign: \"middle\",\n                cursor: \"pointer\",\n              }}\n              onClick={() =>\n                window.open(`https://cardanoscan.io/address/${address}`)\n              }\n            >\n              <span style={{ fontSize: 12, marginRight: 6 }}>{address}</span>\n              <Icon path={mdiOpenInNew} size={0.6} />\n              {/* <ExternalLink size={12} /> */}\n            </div>\n          </div>\n          {/* <Spacer y={2} /> */}\n          <Box h={10} />\n          <div\n            style={{\n              width: \"100%\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <SimpleGrid\n              width=\"90%\"\n              maxWidth={800}\n              columns={[1, null, 3]}\n              gap={8}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  flexDirection: \"column\",\n                  height: 80,\n                  backgroundColor: \"#4a148c\",\n                  borderRadius: 15,\n                  color: \"white\",\n                }}\n              >\n                <div\n                  style={{\n                    marginTop: 10,\n                    marginBottom: 4,\n                  }}\n                >\n                  Total Owned\n                </div>\n                <div style={{ fontWeight: \"bold\", fontSize: 18 }}>\n                  {!isLoading\n                    ? tokens.owned.length + tokens.offers.length\n                    : \"...\"}\n                </div>\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  flexDirection: \"column\",\n                  height: 80,\n                  backgroundColor: \"#4a148c\",\n                  borderRadius: 15,\n                  color: \"white\",\n                }}\n              >\n                <div\n                  style={{\n                    marginTop: 10,\n                    marginBottom: 4,\n                  }}\n                >\n                  Open Bids\n                </div>\n                <div style={{ fontWeight: \"bold\", fontSize: 18 }}>\n                  {!isLoading ? tokens.bids.length : \"...\"}\n                </div>\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  flexDirection: \"column\",\n                  height: 80,\n                  backgroundColor: \"#4a148c\",\n                  borderRadius: 15,\n                  color: \"white\",\n                }}\n              >\n                <div\n                  style={{\n                    marginTop: 10,\n                    marginBottom: 4,\n                  }}\n                >\n                  Listed\n                </div>\n                <div style={{ fontWeight: \"bold\", fontSize: 18 }}>\n                  {!isLoading ? tokens.offers.length : \"...\"}\n                </div>\n              </div>\n            </SimpleGrid>\n          </div>\n          {/* <Spacer y={3} /> */}\n          <Box h={10} />\n          <div style={{ marginBottom: 100 }}>\n            {isLoading ? (\n              <Box\n                width=\"full\"\n                display=\"flex\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n              >\n                <Spinner mt=\"10\" size=\"sm\" color=\"purple\" />\n              </Box>\n            ) : (\n              <Box\n                width=\"full\"\n                display=\"flex\"\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Box h=\"1px\" w=\"95%\" background=\"gray.200\" my={10} />\n\n                <Box width=\"full\" fontWeight=\"bold\" fontSize=\"x-large\" mb={4}>\n                  Open Bids\n                </Box>\n                <Box width=\"full\">\n                  <InfiniteGrid\n                    array={tokens.bids}\n                    spacebudz={spacebudz}\n                    type=\"Bid\"\n                  />\n                </Box>\n                <Box h=\"1px\" w=\"95%\" background=\"gray.200\" my={10} />\n                <Box width=\"full\" fontWeight=\"bold\" fontSize=\"x-large\" mb={4}>\n                  Listed\n                </Box>\n                <Box width=\"full\">\n                  <InfiniteGrid\n                    array={tokens.offers}\n                    spacebudz={spacebudz}\n                    type=\"Listed\"\n                  />\n                </Box>\n                <Box h=\"1px\" w=\"95%\" background=\"gray.200\" my={10} />\n                <Box width=\"full\" fontWeight=\"bold\" fontSize=\"x-large\" mb={4}>\n                  Owned\n                </Box>\n                <Box width=\"full\">\n                  <InfiniteGrid\n                    array={tokens.owned}\n                    spacebudz={spacebudz}\n                    type=\"Bid\"\n                  />\n                </Box>\n              </Box>\n            )}\n          </div>\n        </div>\n      </div>\n      <FloatingButton onClick={() => window.scrollTo(0, 0)} />\n    </>\n  );\n};\n\nexport default Profile;\n"],"names":["displayUnit","quantity","decimals","parseInt","hideZero","str","length","slice","symbol","hide","showQuantity","props","num","toLocaleString","minimumFractionDigits","split","subNum","style","marginRight","fontSize","fromHex","hex","i","substr","String","fromCharCode","spacebudz","pageContext","React","address","setAddress","owned","bids","offers","tokens","setTokens","isLoading","setIsLoading","connected","useStoreState","state","connection","didMount","isFirstConnect","fetchAddressBudz","fetch","headers","project_id","secrets","then","res","json","amount","map","offer","budId","price","filter","bid","owner","ownedAmount","am","unit","startsWith","id","sellPrice","find","undefined","e","update","window","URL","location","href","searchParams","get","current","history","pushState","scrollTo","url","urlChange","setInterval","newUrl","clearInterval","titleTwitter","title","description","minHeight","margin","marginTop","display","alignItems","flexDirection","maxWidth","width","fontWeight","h","wordBreak","verticalAlign","cursor","onClick","open","path","mdiOpenInNew","size","justifyContent","columns","gap","height","backgroundColor","borderRadius","color","marginBottom","mt","w","background","my","mb","array","type"],"sourceRoot":""}