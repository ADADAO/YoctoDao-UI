(self.webpackChunkspace_budz=self.webpackChunkspace_budz||[]).push([[212],{22226:function(){},96339:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(63366),i=n(67294),a=n(5968),o=["quantity","decimals","symbol","hide","showQuantity"],c=function(e,t){return void 0===t&&(t=6),parseInt(e)/Math.pow(10,t)},l=function e(t){return 0==t[t.length-1]?e(t.slice(0,-1)):t},s=function(e){var t=e.quantity,n=e.decimals,s=e.symbol,u=e.hide,d=e.showQuantity,f=(0,r.Z)(e,o),m=c(t,n).toLocaleString("en-EN",{minimumFractionDigits:n}).split(".")[0],p=c(t,n).toLocaleString("en-EN",{minimumFractionDigits:n}).split(".")[1];return i.createElement(a.xu,f,t||0===t?d?i.createElement("span",{style:{marginRight:12}},"-"):i.createElement(i.Fragment,null,m,u&&l(p).length<=0?"":".",i.createElement("span",{style:{fontSize:"75%"}},u?l(p):p.slice(0,2))," "):"... ",s)}},56728:function(e,t,n){"use strict";n.r(t);var r=n(15861),i=n(87757),a=n.n(i),o=n(67294),c=n(45476),l=n(73834),s=n(65865),u=n(76909),d=n(5968),f=n(66795),m=n.n(f),p=n(474),h=n(22226),g=n.n(h),b=n(4401);function w(e){for(var t="",n=0;n<e.length&&"00"!==e.substr(n,2);n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}t.default=function(e){var t,n=e.pageContext.spacebudz,i=o.useState(""),f=i[0],h=i[1],y=o.useState({owned:[],bids:[],offers:[]}),E=y[0],x=y[1],v=o.useState(!0),S=v[0],z=v[1],C=(0,s.useStoreState)((function(e){return e.connection.connected})),I=o.useRef(!1),k=o.useRef(!0),T=function(){var e=(0,r.Z)(a().mark((function e(t){var r,i,o,c,l,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),x(null),r={owned:[],bids:[],offers:[]},e.next=5,fetch("https://cardano-mainnet.blockfrost.io/api/v0/addresses/"+t,{headers:{project_id:g().PROJECT_ID}}).then((function(e){return e.json()})).then((function(e){return e.amount}));case 5:return i=e.sent,e.next=8,fetch("https://spacebudz.io/api/offers/"+t,{headers:{project_id:g().PROJECT_ID}}).then((function(e){return e.json()}));case 8:return o=e.sent,r.offers=o.offers.map((function(e){return Object.assign({},n[e.budId],{price:e.offer.amount})})),e.next=12,fetch("https://spacebudz.io/api/bids",{headers:{project_id:g().PROJECT_ID}}).then((function(e){return e.json()}));case 12:c=e.sent,r.bids=c.bids.filter((function(e){return e.bid.owner==t})).map((function(e){return Object.assign({},n[e.budId],{price:e.bid.amount})}));try{l=i.filter((function(e){return e.unit.startsWith("d5e6bf0500378d4f0da4e8dde6becec7621cd8cbf5cbb9b87013d4cc")})).map((function(e){return parseInt(w(e.unit.slice(56)).split("SpaceBud")[1])})),c.bids.filter((function(e){return e.bid.owner==t})),s=l.map((function(e){var t=c.bids.find((function(t){return t.budId==e}));return Object.assign({},n[e],{price:t?t.bid.amount:void 0})})),r.owned=s}catch(a){}x(r),z(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="undefined"!=typeof window&&new URL(window.location.href).searchParams.get("address"),h(t),T(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.useEffect((function(){I.current?C&&!k.current?window.history.pushState({},null,"/profile?address="+C):k.current=!1:I.current=!0,window.scrollTo(0,0),B()}),[C]),o.useEffect((function(){var e=window.location.href,t=setInterval((function(){var t=window.location.href;e!==t&&(e=t,B())}));return function(){return clearInterval(t)}}),[]),o.createElement(o.Fragment,null,o.createElement(l.Z,{titleTwitter:"SpaceBudz: Collectible Astronauts",title:"SpaceBudz | Profile",description:"Collect your unique SpaceBud as NFT on the Cardano blockchain."}),o.createElement("div",{style:(t={minHeight:"100vh",margin:"0 20px",marginTop:20,display:"flex",alignItems:"center",flexDirection:"column"},t.marginTop=150,t)},o.createElement("div",{style:{maxWidth:1400,width:"100%"}},o.createElement("div",{style:{fontWeight:600,fontSize:26}},"Account Details ",f===C&&"(Connected)"),o.createElement(d.xu,{h:4}),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{wordBreak:"break-all",verticalAlign:"middle",cursor:"pointer"},onClick:function(){return window.open("https://cardanoscan.io/address/"+f)}},o.createElement("span",{style:{fontSize:12,marginRight:6}},f),o.createElement(m(),{path:p.fOx,size:.6}))),o.createElement(d.xu,{h:10}),o.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},o.createElement(d.MI,{width:"90%",maxWidth:800,columns:[1,null,3],gap:8},o.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",height:80,backgroundColor:"#4a148c",borderRadius:15,color:"white"}},o.createElement("div",{style:{marginTop:10,marginBottom:4}},"Total Owned"),o.createElement("div",{style:{fontWeight:"bold",fontSize:18}},S?"...":E.owned.length+E.offers.length)),o.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",height:80,backgroundColor:"#4a148c",borderRadius:15,color:"white"}},o.createElement("div",{style:{marginTop:10,marginBottom:4}},"Open Bids"),o.createElement("div",{style:{fontWeight:"bold",fontSize:18}},S?"...":E.bids.length)),o.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",height:80,backgroundColor:"#4a148c",borderRadius:15,color:"white"}},o.createElement("div",{style:{marginTop:10,marginBottom:4}},"Listed"),o.createElement("div",{style:{fontWeight:"bold",fontSize:18}},S?"...":E.offers.length)))),o.createElement(d.xu,{h:10}),o.createElement("div",{style:{marginBottom:100}},S?o.createElement(d.xu,{width:"full",display:"flex",alignItems:"center",justifyContent:"center"},o.createElement(b.$,{mt:"10",size:"sm",color:"purple"})):o.createElement(d.xu,{width:"full",display:"flex",alignItems:"center",flexDirection:"column"},o.createElement(d.xu,{h:"1px",w:"95%",background:"gray.200",my:10}),o.createElement(d.xu,{width:"full",fontWeight:"bold",fontSize:"x-large",mb:4},"Open Bids"),o.createElement(d.xu,{width:"full"},o.createElement(c.Z,{array:E.bids,spacebudz:n,type:"Bid"})),o.createElement(d.xu,{h:"1px",w:"95%",background:"gray.200",my:10}),o.createElement(d.xu,{width:"full",fontWeight:"bold",fontSize:"x-large",mb:4},"Listed"),o.createElement(d.xu,{width:"full"},o.createElement(c.Z,{array:E.offers,spacebudz:n,type:"Listed"})),o.createElement(d.xu,{h:"1px",w:"95%",background:"gray.200",my:10}),o.createElement(d.xu,{width:"full",fontWeight:"bold",fontSize:"x-large",mb:4},"Owned"),o.createElement(d.xu,{width:"full"},o.createElement(c.Z,{array:E.owned,spacebudz:n,type:"Bid"})))))),o.createElement(u.Tv,{onClick:function(){return window.scrollTo(0,0)}}))}}}]);
//# sourceMappingURL=component---src-templates-profile-js-9eeb7231a3c9a762d8db.js.map